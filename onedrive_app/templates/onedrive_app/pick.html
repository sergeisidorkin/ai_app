{% extends "base.html" %}
{% block title %}–í—ã–±–æ—Ä —Ñ–∞–π–ª–∞{% endblock %}

{% block content %}
<div class="card">
  <div class="card-body">
    <h5 class="card-title">–í—ã–±–æ—Ä —Ñ–∞–π–ª–∞ (.docx) –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É</h5>

    <ul class="list-group list-group-flush">
      {% for it in items %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="me-3">
            {% if it.folder %}üìÅ{% else %}üìÑ{% endif %} {{ it.name }}
          </div>

          <div class="d-flex align-items-center gap-2">
            {# –î–ª—è –ø–∞–ø–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å" #}
            {% if it.folder %}
              <a class="btn btn-sm btn-outline-primary"
                 href="?folder={{ it.id }}">
                –û—Ç–∫—Ä—ã—Ç—å
              </a>
            {% endif %}

            {# –§–æ—Ä–º–∞ –≤—ã–±–æ—Ä–∞ (–∏ –¥–ª—è —Ñ–∞–π–ª–æ–≤, –∏ –¥–ª—è –ø–∞–ø–æ–∫) #}
            <form method="post" action="{% url 'onedrive_select' %}" class="d-inline m-0">
              {% csrf_token %}
              <input type="hidden" name="item_id" value="{{ it.id }}">
              <input type="hidden" name="item_name" value="{{ it.name }}">
              <input type="hidden" name="item_path" value="{{ it.parentReference.path }}/{{ it.name }}">
              <input type="hidden" name="web_url" value="{{ it.webUrl }}">
              <input type="hidden" name="drive_id" value="{{ it.parentReference.driveId }}">
              <input type="hidden" name="is_folder" value="{% if it.folder %}1{% else %}0{% endif %}">
              <button type="submit" class="btn btn-primary btn-sm">–í—ã–±—Ä–∞—Ç—å</button>
            </form>
          </div>
        </li>
      {% empty %}
        <li class="list-group-item">–ü—É—Å—Ç–æ</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}