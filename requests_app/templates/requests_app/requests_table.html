<div class="table-responsive">
  <table class="table table-sm align-middle">
        <thead>
          <tr>
            <th style="width:1%">
              <div class="form-check m-0">
                <input class="form-check-input" type="checkbox" id="requests-master"
                       data-target-name="request-select" data-actions-id="requests-actions"
                       aria-label="Выделить все строки">
              </div>
            </th>
            <th class="col-code">Код</th>
            <th class="col-num">№</th>
            <th>Краткое наименование</th>
            <th>Наименование запроса</th>
          </tr>
        </thead>
        <tbody>
          {% if table and table.items.exists %}
            {% for it in table.items.all %}
              <tr
                data-id="{{ it.id }}"
                data-edit-url="{% url 'request_form_edit' it.id %}"
                data-delete-url="{% url 'request_delete' it.id %}"
                data-move-up-url="{% url 'request_move_up' it.id %}"
                data-move-down-url="{% url 'request_move_down' it.id %}"
              >
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="request-select" value="{{ it.id }}">
                  </div>
                </td>
                <td class="text-nowrap col-code">{{ it.code }}</td>
                <td class="text-nowrap col-num">
                    {% if it.number != None %}{{ it.number|stringformat:"02d" }}
                    {% endif %}
                </td>
                <td class="text-nowrap">{{ it.short_name }}</td>
                <td>{{ it.name }}</td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="5" class="requests-empty-hint">Пока здесь пусто.</td>
            </tr>
          {% endif %}
        </tbody>
  </table>
</div>

<div class="d-flex align-items-stretch gap-2 requests-actions-row">
  <button
    class="btn btn-primary btn-sm d-flex align-items-center"
    hx-get="{% url 'request_form_create' %}?product={{ product.short_name|upper }}&section={{ section.id|default_if_none:'' }}"
    hx-target="#requests-modal .modal-content"
    hx-swap="innerHTML"
    data-bs-toggle="modal"
    data-bs-target="#requests-modal">
    <i class="bi bi-plus-circle me-2"></i>Добавить запрос
  </button>

  <div id="requests-actions" class="d-none d-flex">
    <div class="btn-group">
      <button type="button" data-panel-action="up"
              class="btn btn-outline-primary btn-sm h-100 py-0" title="Переместить вверх">
        <i class="bi bi-arrow-up-square"></i>
      </button>
      <button type="button" data-panel-action="down"
              class="btn btn-outline-primary btn-sm h-100 py-0" title="Переместить вниз">
        <i class="bi bi-arrow-down-square"></i>
      </button>
      <button type="button" id="requests-actions-edit" data-panel-action="edit"
              class="btn btn-outline-primary btn-sm h-100 py-0" title="Изменить">
        <i class="bi bi-pencil-square"></i>
      </button>
      <button type="button" id="requests-actions-delete" data-panel-action="delete"
              class="btn btn-outline-danger btn-sm h-100 py-0" title="Удалить">
        <i class="bi bi-x-square"></i>
      </button>
    </div>
  </div>
</div>